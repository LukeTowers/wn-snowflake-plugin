<?php

use \Skripteria\Snowflake\Classes\EnumFieldType;
use \System\Classes\MediaLibrary;
use System\Classes\ImageResizer;
switch ($record->attributes['type_id']) {

    case EnumFieldType::Image :
        if (! $record->image) {
            echo "- no image uploaded -";
            break;
        } else {
            $src = $record->image->getThumb(100,100);
            echo "<img src='$src' alt='' />";
        }
    break;

    case EnumFieldType::File :
        if (! $record->file) {
            echo "- no file uploaded -";
        } else {
            echo $record->file->getFilename();
        }
    break;

    case EnumFieldType::Color :
        if (empty($value)) {
            echo "- no color defined -";
        } else
        {
            $color = $value;
            echo "<div style='width:20px;height:20px;background-color:$color;'> </div>";
        }
    break;
    case EnumFieldType::MediaImage :
        if (empty($value)) {
            echo "- no media image selected -";
        } else {
            $media_image_path = media_path($value);
            $resizer = new ImageResizer($media_image_path);
            $thumb_path = $resizer->resize(100,100);
            debug($thumb_path);
            // echo "<img src='$src' style='width:100px' alt='' />";
        }
    break;

    default:
        if (empty($value)) {
            echo "- no content yet -";
            break;
        }
        if (strlen($value) > 50) {
            echo substr($value, 0, 50) . '  ( ...)';
        } else {
            echo $value;
        }
    break;

}

?>
